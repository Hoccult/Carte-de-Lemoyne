<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Carte Interactive avec Filtres</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <style>
    html, body, #map {
  height: 1000px;  /* Hauteur fixe */
  width: 100%;
  background-color: #6b6b6b; /* juste pour tester la visibilité */
}

#menu {
  position: absolute;
  top: 10px;
  right: 10px;
  left: auto;    /* enlever left */
  z-index: 1000;
}

  </style>
</head>
<body>

<div id="menu">
  <strong>Filtres :</strong><br>
<label><input type="checkbox" checked onchange="toggleCategory('Maisons')">Maisons</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Camps')">Camps</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Passeurs')">Passeurs</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Tailleurs')">Tailleurs</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Lieux de RDV Marshal')">Lieux de RDV Marshal</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Diamant taillee')">Diamant taillee</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Points chaud')">Points chauds</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Possible QG')">Possible QG</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Puits')">Puits</label><br>
<label><input type="checkbox" checked onchange="toggleCategory('Autres')">Autres</label><br>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // Dimensions de la carte lemoyne
  const imageWidth = 1869;
  const imageHeight = 1701;

  const map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -5,
  });

  const bounds = [[0, 0], [imageHeight, imageWidth]];
  const image = L.imageOverlay('map.png', bounds).addTo(map);
  map.fitBounds(bounds);

  // Regroupe les points par catégorie
const layers = {
  Maisons: L.layerGroup().addTo(map),
  Camps: L.layerGroup().addTo(map),
  Passeurs: L.layerGroup().addTo(map),
  Tailleurs: L.layerGroup().addTo(map),
  'Lieux de RDV Marshal': L.layerGroup().addTo(map),
  'Diamant taillee': L.layerGroup().addTo(map),
  'Points chaud': L.layerGroup().addTo(map),
  'Possible QG': L.layerGroup().addTo(map),
  Puits: L.layerGroup().addTo(map),
  Autres: L.layerGroup().addTo(map),
};

  // Liste des points d’intérêt
const points = [
  { name: "Palais de Justice", coords: [692, 1549], description: "QG Marshal", category: "Maisons" },
  { name: "Poste de Sheriff 1", coords: [689, 1499], description: "Sheriff", category: "Maisons" },
  { name: "Poste de Sheriff 2", coords: [695, 745], description: "Sheriff", category: "Maisons" },
  { name: "Tailleur Illegal", coords: [1128, 943], description: "A surveiller", category: "Tailleurs" },
  { name: "QG", coords: [713, 295], description: "Suspicions d'etre occuper par les italiens", category: "Possible QG" }
];

  // Ajoute les marqueurs à leurs couches respectives
  points.forEach(p => {
    const marker = L.marker(p.coords).bindPopup(`<b>${p.name}</b><br>${p.description}`);
    marker.addTo(layers[p.category]);
  });

  // Fonction appelée lors d’un clic sur une case
  function toggleCategory(cat) {
    if (map.hasLayer(layers[cat])) {
      map.removeLayer(layers[cat]);
    } else {
      map.addLayer(layers[cat]);
    }
  }
  map.on('click', function(e) {
  const y = Math.floor(e.latlng.lat);
  const x = Math.floor(e.latlng.lng);
  alert(`Coordonnées pixels : Y = ${y}, X = ${x}`);
});
</script>

</body>
</html>
